<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link href="bower_components/nvd3/src/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
    <script src="bower_components/nvsd3/nv.d3.js"></script>
    <script src="stream_layers.js"></script>
    <script src="bower_components/d3/nv.d3.min.js"></script>
  </head>

  <body>
    <svg class="pie" width="300" height="100">
      <!-- <rect x="0" y="0"  height="25" width="233.33" />
      <rect x="0" y="25" height="25" width="200" />
      <rect x="0" y="50" height="25" width="300" /> -->
    </svg>
  <script>
  //data
    var sales = [
      { product: 'Hoodie',  count: 12 },
      { product: 'Jacket',  count: 7 },
      { product: 'Snuggie', count: 6 },
    ];
    var pie = d3.layout.pie()
      .value(function(d) { return d.count })

    var slices = pie(sales);
    // the result looks roughly like this:
    [
      {
        data: sales[0],
        endAngle: 3.0159289474462017,
        startAngle: 0,
        value: 12
      },
      {
        data: sales[1],
        startAngle: 3.0159289474462017,
        endAngle: 4.775220833456486,
        value: 7
      },
      {
        data: sales[2],
        startAngle: 4.775220833456486,
        endAngle: 6.283185307179587,
        value: 6
      }
    ]

    var arc = d3.svg.arc()
      .innerRadius(0)
      .outerRadius(50);

    // helper that returns a color based on an ID
    var color = d3.scale.category10();

    var svg = d3.select('svg.pie');
    var g = svg.append('g')
      .attr('transform', 'translate(200, 50)');

    // building a legend is as simple as binding
    // more elements to the same data. in this case,
    // <text> tags
    svg.append('g')
      .attr('class', 'legend')
        .selectAll('text')
        .data(slices)
          .enter()
            .append('text')
              .text(function(d) { return 'â€¢ ' + d.data.product; })
              .attr('fill', function(d) { return color(d.data.product); })
              .attr('y', function(d, i) { return 20 * (i + 1); });


    g.selectAll('path.slice')
      .data(slices)
        .enter()
          .append('path')
            .attr('class', 'slice')
            .attr('d', arc)
            .attr('fill', function(d) {
              return color(d.data.product);
            });
  </script>
  </body>
</html>